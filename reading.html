<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulated Writing with Fabric.js</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.5.1/fabric.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        canvas {
            border: 1px solid #000;
            background: #f9f9f9;
            margin-top: 20px;
        }
        .word {
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <h1>Simulated Writing with Fabric.js</h1>
    <button onclick="startWriting()">Start Writing</button>
    <canvas id="drawingCanvas" width="600" height="400"></canvas>

    <script>
        const canvas = new fabric.Canvas('drawingCanvas');
        const words = ["Cat", "باب", "Ren"];
        const spacing = 80; // Vertical spacing between words

        function startWriting() {
            canvas.clear(); // Clear the canvas
            writeWords(0); // Start writing the first word
        }

        function writeWords(index) {
            if (index < words.length) {
                const word = words[index];
                simulateWriting(word, 100, 50 + index * spacing).then(() => {
                    writeWords(index + 1); // Write the next word
                });
            }
        }

        function simulateWriting(word, x, y) {
            return new Promise(resolve => {
                const text = new fabric.Text(word, {
                    left: x,
                    top: y,
                    fontSize: 50,
                    fill: 'black'
                });

                // Create a path for each letter
                const letterPositions = [];
                for (let i = 0; i < word.length; i++) {
                    letterPositions.push({ x: x + i * 30, y: y }); // Adjust x position for each letter
                }

                // Animate letter drawing
                canvas.add(text); // Add text to canvas
                text.set({ opacity: 0 }); // Start with invisible text
                canvas.renderAll(); // Render canvas

                // Simulate drawing effect
                let index = 0;
                function drawLetter() {
                    if (index < letterPositions.length) {
                        const pos = letterPositions[index];
                        text.set({ left: pos.x, top: pos.y, opacity: 1 });
                        canvas.renderAll(); // Update canvas
                        index++;
                        setTimeout(drawLetter, 500); // Delay between letters
                    } else {
                        resolve(); // Resolve promise when done
                    }
                }

                drawLetter(); // Start drawing letters
            });
        }
    </script>
</body>
</html>
